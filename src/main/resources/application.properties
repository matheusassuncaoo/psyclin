spring.application.name=psyclin
debug=true
spring.output.ansi.enabled=ALWAYS


# Conectar com o banco de dados
#Driver do java
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# PARA DESENVOLVIMENTO LOCAL - ALTERE PARA SEU BANCO:
spring.datasource.url=
spring.datasource.username=
spring.datasource.password=

spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.database-platform=org.hibernate.dialect.MySQL8Dialect

# Configuração da porta do servidor - Porta padrão do Spring Boot
server.port=8080

#Configuração para o banco de dados - OTIMIZADO para evitar max_user_connections
# Número máximo de conexões no pool (reduzido para evitar limite do servidor)
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=2

# Tempo máximo de espera por uma conexão (reduzido)
spring.datasource.hikari.connection-timeout=20000
# Tempo máximo que uma conexão pode ficar ociosa (reduzido para liberar mais rápido)
spring.datasource.hikari.idle-timeout=300000
# Tempo máximo de vida de uma conexão (reduzido)
spring.datasource.hikari.max-lifetime=600000

# Configurações para fechar conexões vazias automaticamente
spring.datasource.hikari.leak-detection-threshold=60000
spring.datasource.hikari.validation-timeout=5000
spring.datasource.hikari.connection-test-query=SELECT 1

# Configurações de erro
server.error.include-exception=true
server.error.include-message=always
server.error.include-binding-errors=always
server.error.include-stacktrace=on_param

# Configuração de logging
logging.level.com.br.psyclin=DEBUG
logging.level.org.springframework.web=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# Configuração Chat GPT na aplicação
spring.ai.openai.api-key=sk-ijklmnopqrstuvwxijklmnopqrstuvwxijklmnop
# Modelo padrão para o Chat GPT
spring.ai.openai.chat.options.model=gpt-3.5-turbo
spring.ai.openai.chat.options.temperature=0.7


# Configurações de Jackson para evitar loops infinitos
spring.jackson.serialization.fail-on-empty-beans=false
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.deserialization.fail-on-unknown-properties=false